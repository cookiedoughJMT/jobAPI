
# ================================== Q2 sentence Generator ========================

def generate_json_q2sg_prompt(
        content, personality
):

    strengths = [p["text"] for p in personality if p["type"] == "장점"]
    weaknesses = [p["text"] for p in personality if p["type"] == "단점"]

    # personality 기반 설명
    strength_desc = ""
    if strengths:
        strength_desc = f"저의 주요 강점은 {', '.join(strengths)} 입니다. "
        strength_desc += "이러한 성격은 성장 과정에서 자연스럽게 형성되었고, 여러 경험 속에서 더욱 두드러졌습니다."

    weakness_desc = ""
    if weaknesses:
        weakness_desc = f"또한, {', '.join(weaknesses)}과 같은 단점도 있었지만 이를 극복하기 위해 지속적으로 노력하며 성장했습니다."


    prompt = f"""
    당신은 사용자가 입력한 성장 배경과 성격을 바탕으로 약 3~4문장 분량의 짧은 에세이를 작성하는 전문가입니다.
    
    아래 내용을 참고하여, 
    - 성장 배경 속에서 장점(type="장점") 성격을 자연스럽게 드러내며,
    - 단점(type="단점") 성격이 있을 경우 이를 극복하기 위해 노력한 모습을 보여주세요.
    총 3개의 서로 다른 에세이를 만들어야 합니다.
    
    모든 문장은 존댓말로 작성하세요.
    반드시 JSON 배열 형식으로 아래처럼 출력하세요:
    [
      "첫 번째 에세이 (약 3~4문장)",
      "두 번째 에세이 (약 3~4문장)",
      "세 번째 에세이 (약 3~4문장)"
    ]
    
    ### 사용자 입력 성장 배경
    {content}
    
    ### 성격
    {strength_desc}{(" " + weakness_desc) if weakness_desc else ""}
    """

    print(prompt)

    return prompt
# end def

# ================================== Q4 sentence Generator ========================

def generate_json_q4sg_prompt(text, degree, major):
    prompt = f"""
            다음은 사용자가 입력한 학력과 학업 중 경험에 대한 간략한 설명입니다. 이를 바탕으로, 문학적인 표현을 활용해 자기소개서에서 사용할 수 있는 문장 3개를 작성하세요.
            
            - 입력된 학력 : "{degree}"
            - 입력된 전공 : "{major}"
            - 입력된 경험 : "{text}"
            
            📌 작성 규칙:
            1. 총 3개의 서로 다른 자기소개서 문장을 만들어야 합니다.
            2. 각 문장은 최소 3문장 이상으로 구성하세요.
            3. 자연스럽고 서사적인 문체로 작성하세요 (예: 경험의 맥락 → 구체적인 행동 → 느낀 점).
            4. 문장은 모두 면접관에게 말하듯 '저는'으로 시작되는 존댓말 어조로 써주세요.
            5. 최종 출력은 아래 형식처럼 **JSON 배열**로만 반환하세요 (key 없이).
            
            출력 예시:
            [
              "저는 ~로 시작하는 첫 번째 자기소개 문장...",
              "저는 ~로 시작하는 두 번째 자기소개 문장...",
              "저는 ~로 시작하는 세 번째 자기소개 문장..."
            ]
            """

    print(prompt)

    return prompt


# end def

# ================================== Q4 sentence Generator ========================

def generate_json_qXsg_prompt(text, company, position, workperiod, job):
    prompt = f"""
        
            사용자가 아래에 입력한 근무 정보를 바탕으로, 자기소개서에서 사용할 수 있는 문장 3개를 작성하세요. 문장은 회사에서의 직무 경험과 배운 점, 성과, 느낀 점 등을 중심으로 서사적으로 풀어내야 하며, 각 문장은 반드시 '저는'으로 시작하고 존댓말을 사용해야 합니다.

            - 회사명: "{company}"
            - 직급/직책: "{position}"
            - 근무 기간: "{workperiod}"
            - 담당 직무: "{job}"
            - 주요 경험 요약: "{text}"
            
            📌 작성 규칙:
            1. 총 3개의 서로 다른 자기소개 문장을 작성하세요.
            2. 각 문장은 반드시 3문장 이상으로 구성하세요.
            3. 문학적이고 서사적인 문체로 자연스럽게 작성하세요.
            4. 문장은 모두 면접관에게 말하듯 '저는'으로 시작되는 존댓말 어조로 써주세요.
            5. 문장 속에 입력된 회사명, 직무, 직책, 경험 요약이 자연스럽게 반영되어야 합니다.
            6. 아래 출력 예시처럼 JSON 배열 형식으로만 반환하세요. key 없이 배열([])만 출력해야 합니다.
            
            출력 예시:
            [
              "저는 A기업에서 마케팅 대리로 근무하며 고객 타겟 분석과 캠페인 실행을 주도한 경험이 있습니다. 그 과정에서 고객 데이터를 기반으로 전략을 수립하고, 팀원들과의 협업을 통해 프로젝트 성과를 높일 수 있었습니다. 이 경험은 제게 실무 능력뿐만 아니라 커뮤니케이션과 책임감의 중요성을 일깨워준 소중한 시간이었습니다.",
              "저는 B회사에서 UX 디자이너로 근무하며 사용자 피드백을 기반으로 한 화면 설계를 경험했습니다. 특히 리디자인 프로젝트를 통해 팀 내 소통과 유연한 대응 역량을 키울 수 있었습니다. 실질적인 사용자 중심 사고가 무엇인지 체득하게 된 계기가 되었습니다.",
              "저는 C기업의 인턴으로 참여한 기간 동안, 데이터 분석과 리포트 작성 업무를 맡아 실무 감각을 익혔습니다. 매일 반복되는 작업 속에서도 데이터가 말하는 인사이트를 끌어내는 과정이 매우 흥미로웠고, 분석적 사고 능력을 키우는 데 큰 도움이 되었습니다. 이 경험은 제 진로에 대한 확신을 심어준 중요한 전환점이었습니다."
            ]
            """
    print(prompt)

    return prompt

# end def

# ================================== Q6 sentence Generator ========================

def generate_json_q6sg_prompt(text, achievements):
    joined_achievements = ', '.join(f'"{a}"' for a in achievements)

    prompt = f"""
    사용자가 아래에 입력한 자격증 또는 수상 경력 정보를 바탕으로, 자기소개서에서 사용할 수 있는 문장 3개를 작성하세요. 
    각 문장은 회사에서의 직무 경험과 배운 점, 성과, 느낀 점 등을 중심으로 **서사적으로 풀어내야 하며**, 
    모든 문장은 반드시 '저는'으로 시작하고 존댓말을 사용해야 합니다.

    - 자격증 또는 수상 경력 (복수 가능): [{joined_achievements}]
    - 지원자가 해당 자격증 또는 수상 경력을 얻기 위해 한 노력 요약: "{text}"

    📌 작성 규칙:
    1. 총 3개의 **서로 다른 자기소개 문장**을 작성하세요.
    2. 각 문장은 반드시 3문장 이상으로 구성하세요.
    3. 문학적이고 서사적인 문체로 자연스럽게 작성하세요.
    4. 문장은 모두 면접관에게 말하듯 '저는'으로 시작되는 존댓말 어조로 써주세요.
    5. 자격증 또는 수상 경력은 문장 속에 자연스럽게 녹여내되, 강조 포인트로 활용하세요.
    6. 아래 출력 예시처럼 **JSON 배열 형식으로만** 반환하세요. key 없이 배열([])만 출력해야 합니다.

    출력 예시:
    [
      "저는 산업안전기사 자격증을 취득하기 위해 현장 실습과 이론 학습에 꾸준히 몰입했습니다. 이 자격을 바탕으로 실제 공정 내 안전 절차 수립에 직접 기여한 경험이 있습니다. 안전이 기업의 기본이라는 신념을 몸소 체득한 소중한 시간이었습니다.",
      "저는 공모전에서 대상을 수상한 경험이 있습니다. 해당 수상을 위해 팀원들과 밤낮없이 아이디어를 고도화하고 발표 자료를 준비하는 과정을 겪었습니다. 이 과정은 제게 기획력과 실행력, 그리고 협업의 중요성을 절실히 느끼게 해주었습니다.",
      "저는 컴퓨터 활용능력 1급을 취득하며 데이터 정리와 문서 자동화 능력을 키울 수 있었습니다. 특히 실무에 적용하며 팀 내 보고서 작업 효율을 크게 향상시켰던 경험이 있습니다. 기술을 통한 문제 해결이 얼마나 중요한지를 체감했던 시기였습니다."
    ]
    """

    print(prompt)

    return prompt

# end def

# ================================== Q7 sentence Generator ========================

def generate_json_q7sg_prompt(text):
        prompt = f"""
        사용자가 아래에 입력한 내용을 바탕으로, 자기소개서에서 사용할 수 있는 문장 3가지를 제안해주세요.
        입력 내용은 사용자가 작성한 '회사에 대한 포부 또는 입사 후 목표'의 초안입니다.

        📌 작성 조건:
        1. 총 3개의 **서로 다른 스타일의 자기소개 문장**을 작성하세요.
        2. 각 문장은 **3문장 이상**으로 구성하되, 자연스러운 흐름을 가진 **서사형 문체**로 작성하세요.
        3. 문장은 모두 면접관에게 말하듯 '저는'으로 시작되는 존댓말 어조로 써주세요.
        4. 입력된 내용을 그대로 반복하지 말고, 핵심 의도를 살려 다듬고 확장해서 작성하세요.
        5. 회사에 대한 진심 어린 포부, 구체적인 실행 계획, 배경 동기를 서술 속에 녹여내세요.
        6. 아래 출력 예시처럼 **JSON 배열 형식으로만** 출력하세요. key 없이 배열([])만 반환해야 합니다.

        입력 내용: "{text}"

        출력 예시:
        [
          "저는 고객 중심의 서비스를 만들겠다는 꿈을 실현하기 위해 귀사에 지원하게 되었습니다. 특히 사용자의 니즈를 깊이 이해하고 이를 반영한 프로젝트를 주도하고 싶습니다. 이를 통해 회사의 가치와 저의 성장을 함께 이끌어가고자 합니다.",
          "저는 데이터를 기반으로 전략을 세우고 실행하는 일에 매력을 느낍니다. 귀사의 데이터 기반 의사결정 문화에 큰 감명을 받았고, 저 또한 이 과정에 실질적인 기여를 하고 싶습니다. 주도적으로 분석하고 개선을 제안하는 구성원이 되겠습니다.",
          "저는 변화에 민감하게 대응하고 끊임없이 배우는 자세로 일하는 것을 중요하게 생각합니다. 귀사의 빠른 성장과 혁신적인 기업문화 속에서, 능동적으로 도전하며 함께 성장할 수 있다고 믿습니다. 입사 후에도 성실한 자세로 맡은 바를 완수하겠습니다."
        ]
        """

        print(prompt)

        return prompt

# end def

# ================================== create resume  ========================

def generate_json_createresume_prompt(
    personalities, growStory, degree, major, whenLearn,
    company, workPeriod, position, job, achievements, forCompany
):
    # --- 동적으로 문장 생성 ---
    grow_story_line = f"- 성장 배경: {growStory}\n" if growStory else ""
    when_learn_line = f"- 학업 중 경험: {whenLearn}\n" if whenLearn else ""
    work_period_line = f"- 근무 기간: {workPeriod}\n" if workPeriod else ""
    achievements_line = f"- 자격증/수상: {achievements}\n" if achievements else ""
    for_company_line = f"- 회사 포부: {forCompany}\n" if forCompany else ""

    # --- 성격 ---
    personalities_summary = [p["text"] for p in personalities]

    # --- Prompt ---
    prompt = f"""
            당신은 지원자의 입력값을 바탕으로, 4개의 자기소개서 문단을 구성해야 합니다. 각각의 문단은 아래와 같은 목적을 갖습니다:
            
            1️⃣ personality: 지원자의 **성격적 장점 3개, 단점 2개**를 바탕으로 형성된 **성장 과정과 인성**을 서술합니다. 각 성격 항목의 `answer` 필드를 활용해, 자연스럽게 이어지는 하나의 서사 문단으로 구성하세요.{" 성장 배경도 반영해 주세요." if growStory else ""}
            
            2️⃣ education: 사용자의 **학력 정보({degree}, {major})와 학업 중 경험**을 바탕으로, **지원 직무에 얼마나 적합한지**를 강조하세요.
            
            3️⃣ career: 사용자의 **근무 이력(회사명: {company}, 근무 기간: {workPeriod}, 직급/직책: {position}, 직무: {job})**을 기반으로, 직무 전문성을 어필하세요.
            
            4️⃣ attitude: 사용자가 입력한 **회사에 대한 포부**({forCompany})를 바탕으로, 입사 후 어떤 태도와 자세로 근무할지를 다룬 문단을 작성하세요.
            
            📌 작성 규칙:
            - 각 항목은 `personality`, `education`, `career`, `attitude` 키를 가진 JSON 형식으로 구성하세요.
            - 각 문단은 반드시 모두 10문장 이상의 자연스러운 자기소개 문단으로 작성되어야 합니다.
            - 문장은 모두 면접관에게 말하듯 '저는'으로 시작되는 존댓말 어조로 써주세요.
            - 중복된 문장 없이, 자연스럽게 연결된 흐름을 가진 서사형 문단을 작성하세요.
            - 최종 출력은 key가 포함된 JSON 객체로 반환하며, 예시는 아래와 같습니다:
            
            다음은 사용자가 입력한 실제 데이터입니다:
            - 성격 요약: {personalities_summary}
            {grow_story_line}{when_learn_line}
            - 학력: {degree}, {major}
            {work_period_line}
            - 회사: {company}, 직급/직책: {position}, 직무: {job}
            {achievements_line}{for_company_line}
            
            반드시 아래 형식으로 출력하세요:
            {{
              "personality": "...",
              "education": "...",
              "career": "...",
              "attitude": "..."
            }}
            """

    print(prompt)
    return prompt
